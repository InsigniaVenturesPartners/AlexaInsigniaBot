{
  "type": "APL",
  "version": "1.6",
  "license": "Copyright 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved.\nSPDX-License-Identifier: LicenseRef-.amazon.com.-AmznSL-1.0\nLicensed under the Amazon Software License  http://aws.amazon.com/asl/",
  "import": [
    {
      "name": "alexa-layouts",
      "version": "1.3.0"
    }
  ],
  "mainTemplate": {
    "parameters": [
      "myData"
    ],
    "items": [
      {
        "type": "Container",
        "height": "100%",
        "width": "100%",
        "paddingTop": "@spacingSmall",
        "bind": [
          {
            "name": "sliderThumbPosition",
            "value": 0
          },
          {
            "name": "videoProgressValue",
            "type": "number",
            "value": 0
          },
          {
            "name": "videoTotalValue",
            "type": "number",
            "value": 0
          }
        ],
        "items": [
          {
            "type": "AlexaBackground"
          },
          {
            "type": "Container",
            "id": "ToastContainer",
            "display": "none",
            "position": "absolute",
            "alignSelf": "start",
            "justifyContent": "center",
            "width": "100%",
            "height": "10%",
            "items": [
              {
                "type": "Frame",
                "position": "absolute",
                "width": "100%",
                "height": "100%",
                "backgroundColor": "@colorBlue800"
              },
              {
                "type": "Text",
                "id": "ToastText",
                "text": "[Uninitialized Toast]",
                "style": "textStyleBody",
                "paddingLeft": "@spacingSmall"
              }
            ]
          },
          {
            "type": "Video",
            "height": "100%",
            "width": "70%",
            "alignSelf": "center",
            "shrink": 1,
            "autoplay": true,
            "audioTrack": "foreground",
            "id": "videoPlayerId",
            "source": [
              "{payload.videoURL}"
            ],
            "onPlay": [
              {
                "type": "SetValue",
                "property": "videoTotalValue",
                "value": "${event.duration}"
              }
            ],
            "onTrackUpdate": [
              {
                "type": "SetValue",
                "property": "videoTotalValue",
                "value": "${event.duration}"
              },
              {
                "type": "Sequential",
                "commands": [
                  {
                    "type": "SetValue",
                    "componentId": "ToastText",
                    "property": "text",
                    "value": "Playing next video..."
                  },
                  {
                    "type": "SetValue",
                    "componentId": "ToastContainer",
                    "property": "display",
                    "value": "visible"
                  },
                  {
                    "type": "SetValue",
                    "componentId": "ToastContainer",
                    "property": "display",
                    "value": "none",
                    "delay": "3000"
                  }
                ]
              }
            ],
            "onTimeUpdate": [
              {
                "type": "SetValue",
                "property": "videoProgressValue",
                "value": "${event.currentTime}"
              },
              {
                "type": "SetValue",
                "componentId": "slider",
                "property": "progressValue",
                "value": "${videoProgressValue}"
              },
              {
                "type": "SetValue",
                "property": "videoTotalValue",
                "value": "${event.duration}"
              }
            ]
          },
          {
            "type": "Container",
            "alignItems": "center",
            "item": [
              {
                "type": "AlexaSlider",
                "id": "slider",
                "progressValue": "${videoProgressValue}",
                "totalValue": "${videoTotalValue}",
                "positionPropertyName": "sliderThumbPosition",
                "metadataDisplayed": true,
                "metadataPosition": "above_right",
                "width": "75%",
                "paddingBottom": "90dp",
                "onUpCommand": [
                  {
                    "type": "SetValue",
                    "componentId": "debugText",
                    "property": "text",
                    "value": "${sliderThumbPosition - videoProgressValue}"
                  },
                  {
                    "type": "ControlMedia",
                    "componentId": "videoPlayerId",
                    "command": "seek",
                    "value": "${sliderThumbPosition - videoProgressValue}"
                  }
                ]
              },
              {
                "type": "AlexaTransportControls",
                "mediaComponentId": "videoPlayerId",
                "playPauseToggleButtonId": "playPauseToggleButtonId",
                "primaryControlSize": "70dp",
                "secondaryControlSize": "60dp",
                "autoplay": true,
                "position": "absolute",
                "bottom": "10dp"
              }
            ]
          }
        ]
      }
    ]
  }
}